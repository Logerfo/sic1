<html>
    <head>
        <title>SIC-1</title>
        <link rel="stylesheet" href="css/sic1-client.css" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    </head>
    <body>
        <!-- Google Analytics -->
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            try {
                // Use localStorage instead of cookie
                var GA_LOCAL_STORAGE_KEY = "sic1_ga";
                ga('create', 'UA-49186539-7', {
                    'storage': 'none',
                    'clientId': localStorage.getItem(GA_LOCAL_STORAGE_KEY)
                });
                ga(function(tracker) {
                    localStorage.setItem(GA_LOCAL_STORAGE_KEY, tracker.get('clientId'));
                });
                ga('send', 'pageview');
            } catch (e) {}

            // Global error reporting
            window.onerror = function(message) {
                ga('send', 'exception', {
                    'exDescription': message,
                    'exFatal': true
                });
                return true;
            };
        </script>

        <div id="root">
            <div id="controls">
                <table>
                    <tr><th id="title">Title</th></tr>
                    <tr><td id="description" class="text">Description goes here</td></tr>
                </table>
                <br />
                <div id="ioBox">
                    <table id="io">
                        <thead><tr><th>In</th><th>Expected</th><th>Actual</th></tr></thead>
                        <tbody id="ioBody"></tbody>
                    </table>
                </div>
                <br />
                <table id="stats">
                    <tr><th class="horizontal">State</th><td id="running">Stopped</td></tr>
                    <tr><th class="horizontal">Cycles</th><td id="cycles">0</td></tr>
                    <tr><th class="horizontal">Bytes</th><td id="bytes">0</td></tr>
                </table>
                <br />
                <button id="load">Load</button>
                <button id="stop" disabled="true">Stop</button>
                <button id="step" disabled="true">Step</button>
                <button id="run" disabled="true">Run</button>
                <button id="menu">Menu</button>
            </div>
            <div id="program">
                <textarea id="input" spellcheck="false" wrap="off">; Code goes here</textarea>
                <div id="source" class="hidden"></div>
            </div>
            <div id="state">
                <table id="memory"><tr><th colspan="16">Memory</th></tr></table>
                <br />
                <table id="variables" class="hidden">
                    <thead><tr><th>Label</th><th>Value</th></tr></thead>
                    <tbody id="variablesBody"></tbody>
                </table>
            </div>
        </div>
        <div id="messageBox" class="hidden">
            <div id="messageHeader">
                <span id="messageTitle">Title</span>
                <button id="messageClose">X</button>
            </div>
            <div id="messageBody">
                <div id="contentWelcome" class="hidden">
                    <h1>Welcome to SIC Systems!</h1>
                    <h2>Job Description</h2>
                    <p>SIC Systems is looking for programmers to produce highly efficient programs for their flagship product: the Single Instruction Computer Mark 1 (SIC-1).</p>
                    <p>Note that you will be competing against other engineers to produce the fastest and smallest programs.</p>
                    <h2>Job Application</h2>
                    <p>Please provide your name:</p>
                    <p><input id="messageInputName" /></p>
                    <p>Then click this link to: <a id="messageApplyLink" href="#">apply for the job</a>.</p>
                </div>
                <div id="contentWelcome2" class="hidden">
                    <h2>Congratulations!</h2>
                    <p>Congratulations, <span id="messageWelcomeName"></span>! SIC Systems has accepted your application. Introductory information and your first assignment are below.</p>
                    <h2>Introducing the SIC-1</h2>
                    <p>The SIC-1 represents a transformational change in computing, reducing complexity to the point that the processor only executes a single instruction: subtract and branch if less than or equal to zero ("subleq").</p>
                    <p>Note that you can view the program inventory by clicking the "Menu" button or hitting ESC.</p>
                    <p>Click this link to: <a id="messageFirstLink" href="#">get started with your first SIC-1 program</a>.</p>
                </div>
                <div id="contentResume" class="hidden">
                    <h2><span id="messageResumePrefix">Welcome back,</span> <span id="messageResumeName"></span>!</h2>
                    <p>For motivational purposes, here is how the number of tasks you've completed compares to other engineers.</p>
                    <div id="messageResumeCharts" class="charts"></div>
                    <p>Click this link to: <a class="messageNextLink" href="#">go to the program inventory</a>.</p>
                </div>
                <div id="contentSuccess" class="hidden">
                    <h2>Well done!</h2>
                    <p>Your program produced the correct output.</p>
                    <p>Performance statistics of your program (as compared to others' programs):</p>
                    <div id="contentSuccessCharts" class="charts"></div>
                    <p>Click this link to: <a class="messageNextLink" href="#">go to the program inventory</a>.</p>
                </div>
                <div id="contentCompilationError" class="hidden">
                    <h2>Compilation Error!</h2>
                    <p id="messageError">Error</p>
                </div>
                <div id="contentSelect" class="hidden">
                    <p>SIC Systems requires you to implement the following programs:</p>
                    <ol id="puzzleList"></ol>
                </div>
            </div>
        </div>
        <div id="dimmer" class="hidden"></div>
        <svg class="chart hidden" width="20em" height="24em" viewBox="0 -2 20 24">
            <rect x="0" y="-2" width="20" height="1.6"></rect>
            <line x1="0" y1="20" x2="20" y2="20"></line>
            <text class="chartTitle" x="10" y="-0.9">Chart</text>
            <polyline class="chartLine" points="0,20 20,20"></polyline>
            <rect class="chartHighlight" x="0" y="20" width="1" height="20"></rect>
            <text class="chartLeft" x="0" y="21.5">0</text>
            <text class="chartRight" x="20" y="21.5">100</text>
            <text class="chartOverlay" x="10" y="10">Loading...</text>
        </svg>

        <script src="../../lib/oisc.js"></script>
        <script src="js/sic1-client.js"></script>
    </body>
</html>
